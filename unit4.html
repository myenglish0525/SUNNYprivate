
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>UNIT4 單字練習</title>
  <style>
    body { font-family: sans-serif; padding: 20px; max-width: 700px; margin: auto; }
    .question-box { display: none; margin-bottom: 25px; }
    .question-box.active { display: block; }
    .result { font-weight: bold; margin-top: 10px; }
    .score { margin-bottom: 20px; font-size: 18px; }
    button { margin-top: 10px; padding: 8px 14px; }
    input { padding: 8px; font-size: 16px; width: 100%; margin-top: 10px; }
  </style>
</head>
<body>
  <h2>📘 UNIT4 單字練習（中翻英填空）</h2>
  <div class="score">目前得分：<span id="score">0</span> 分 / 160</div>
  <div id="quiz"></div>

  <script>
    const questions = [
      { zh: "科學", en: "science" },
      { zh: "體育", en: "PE" },
      { zh: "看書", en: "read books" },
      { zh: "睡覺", en: "go to bed" },
      { zh: "吃晚餐", en: "eat dinner" },
      { zh: "玩電腦遊戲", en: "play computer games" },
      { zh: "做功課", en: "do homework" },
      { zh: "看電視", en: "watch TV" }
    ];

    let current = 0;
    let score = 0;
    let wrongList = [];

    function renderQuestion(index) {
      const container = document.getElementById("quiz");
      container.innerHTML = "";
      const q = questions[index];
      const box = document.createElement("div");
      box.className = "question-box active";
      box.innerHTML = `
        <div>Q${index + 1}. 【中翻英】請寫出英文：<strong>${q.zh}</strong></div>
        <input id="answer" type="text" autocomplete="off" />
        <button onclick="checkAnswer('${q.en}', ${index})">送出</button>
        <div class="result" id="result"></div>
      `;
      container.appendChild(box);
      document.getElementById("answer").focus();
    }

    function checkAnswer(correct, index) {
      const input = document.getElementById("answer").value.trim().toLowerCase();
      const answer = correct.toLowerCase();
      const result = document.getElementById("result");

      if (input === answer) {
        score += 20;
        document.getElementById("score").innerText = score;
        current++;
        if (current < questions.length) {
          renderQuestion(current);
        } else {
          if (wrongList.length > 0) {
            questions.splice(0, questions.length, ...wrongList);
            wrongList = [];
            current = 0;
            renderQuestion(current);
          } else {
            alert("🎉 恭喜你完成 UNIT4！即將前往 UNIT5...");
            window.location.href = "unit5_sentences.html";
          }
        }
      } else {
        result.innerHTML = `❌ 錯誤，正確答案是：<span style="color: green;">${correct}</span>`;
        if (!wrongList.includes(questions[index])) {
          wrongList.push(questions[index]);
        }
        current++;
        setTimeout(() => {
          if (current < questions.length) {
            renderQuestion(current);
          } else {
            questions.splice(0, questions.length, ...wrongList);
            wrongList = [];
            current = 0;
            renderQuestion(current);
          }
        }, 2000);
      }
    }

    renderQuestion(current);
  </script>
</body>
</html>
