
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>UNIT5｜Sky 情境對話練習</title>
  <style>
    body { font-family: Arial; background: #f0f8ff; padding: 20px; }
    .card { background: white; padding: 20px; border-radius: 12px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-bottom: 20px; }
    .question { font-size: 1.1em; margin-bottom: 10px; }
    .options { margin: 10px 0; }
    .options button { margin: 5px; padding: 8px 16px; font-size: 1em; }
    .score { margin-bottom: 15px; font-size: 1.1em; color: green; }
    .result { font-weight: bold; margin-top: 10px; }
  </style>
</head>
<body>
  <h1>UNIT5｜Sky 主題對話練習</h1>
  <div id="app"></div>

<script>
const questions = [
  {
    sentence: "A: Look! The sky is so ______ today.\nB: Yes, it's very clear.",
    options: ["blue", "green", "gray"],
    answer: "blue"
  },
  {
    sentence: "A: Are there any ______ in the sky?\nB: No, it's a sunny day.",
    options: ["stars", "clouds", "birds"],
    answer: "clouds"
  },
  {
    sentence: "A: Wow! I see a ______ flying in the sky.\nB: That’s a big one!",
    options: ["kite", "balloon", "airplane"],
    answer: "airplane"
  },
  {
    sentence: "A: It's getting dark. I can see the ______.\nB: Let's count them!",
    options: ["sun", "stars", "clouds"],
    answer: "stars"
  },
  {
    sentence: "A: Why is the sky gray?\nB: It’s going to ______.",
    options: ["snow", "shine", "rain"],
    answer: "rain"
  },
  {
    sentence: "A: I like watching the sky with my ______.\nB: Me too! We can see far.",
    options: ["camera", "telescope", "flashlight"],
    answer: "telescope"
  },
  {
    sentence: "A: What’s that bright light in the sky?\nB: It’s the ______.",
    options: ["moon", "lamp", "car"],
    answer: "moon"
  },
  {
    sentence: "A: The weather is ______. Let’s fly a kite!\nB: Great idea!",
    options: ["sunny", "windy", "snowy"],
    answer: "windy"
  },
  {
    sentence: "A: The sky is dark and cloudy.\nB: Yes, it looks like a ______ is coming.",
    options: ["rainbow", "storm", "sunset"],
    answer: "storm"
  },
  {
    sentence: "A: At night, the sky is full of ______.\nB: They look so beautiful!",
    options: ["stars", "birds", "clouds"],
    answer: "stars"
  }
];

let current = 0;
let score = 0;
let wrongList = [];

function renderQuestion(index) {
  const q = questions[index];
  document.getElementById("app").innerHTML = `
    <div class="card">
      <div class="score">目前得分：${score} 分</div>
      <div class="question">${q.sentence.replace(/\n/g, "<br>")}</div>
      <div class="options">
        ${q.options.map(opt => `<button onclick="checkAnswer('${opt}')">${opt}</button>`).join('')}
      </div>
      <div id="result" class="result"></div>
    </div>
  `;
}

function checkAnswer(selected) {
  const correct = questions[current].answer;
  const resultDiv = document.getElementById("result");
  if (selected === correct) {
    resultDiv.innerHTML = "✅ 答對了！";
    score += 10;
    setTimeout(nextQuestion, 1000);
  } else {
    resultDiv.innerHTML = `❌ 答錯了，正確答案是：${correct}`;
    wrongList.push(questions[current]);
    setTimeout(nextQuestion, 1200);
  }
}

function nextQuestion() {
  current++;
  if (current < questions.length) {
    renderQuestion(current);
  } else if (wrongList.length > 0) {
    questions.length = 0;
    questions.push(...wrongList);
    wrongList = [];
    current = 0;
    renderQuestion(current);
  } else {
    if (score >= 100) {
      document.getElementById("app").innerHTML = `<h2>🎉 恭喜你完成 UNIT5！總分：${score} 分</h2><p>將自動前往 UNIT6...</p>`;
      setTimeout(() => {
        window.location.href = "unit6.html";
      }, 2000);
    } else {
      document.getElementById("app").innerHTML = `
        <h2>總分：${score} 分</h2>
        <p>尚未滿分，請重新挑戰錯題！</p>
        <button onclick="restart()">重新挑戰</button>
      `;
    }
  }
}

function restart() {
  current = 0;
  score = 0;
  wrongList = [];
  renderQuestion(current);
}

renderQuestion(current);
</script>
</body>
</html>
